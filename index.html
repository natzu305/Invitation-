<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Undangan Pernikahan</title>
  <meta name="theme-color" content="#b37baa" />
  <meta name="description" content="Undangan pernikahan digital Ain Fadhila & Candra ‚Äì siap dibagikan dengan countdown, RSVP WhatsApp, peta, galeri, gift, & QR." />
  <!-- Open Graph untuk preview saat dibagikan -->
  <meta property="og:title" content="Undangan Pernikahan Ain Fadhila & Candra" />
  <meta property="og:description" content="Mohon doa & kehadiran Anda di pernikahan kami." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://natzu305.github.io/Invitation-/?to=" />
  <meta property="og:image" content="https://natzu305.github.io/Undangan/7.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:site_name" content="Undangan Ain Fadhila & Candra" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --brand: #b37baa;
      --bg: #fffaf7;
      --ink: #2b2b2b;
      --muted: #6b6b6b;
      --card: #ffffff;
      --ring: rgba(179,123,170,0.25);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: Poppins, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.6;
    }
    img { max-width: 100%; display: block; }
    a { color: var(--brand); text-decoration: none; }
    .container { max-width: 980px; margin: 0 auto; padding: 20px; }
    header.hero {
      position: relative;
      isolation: isolate;
      min-height: 85vh;
      display: grid;
      place-items: center;
      text-align: center;
      background: radial-gradient(60% 60% at 70% 10%, #f8e9f3 0%, transparent 60%),
                  radial-gradient(50% 50% at 0% 100%, #fff1e9 0%, transparent 60%);
      padding: 48px 16px;
    }
    .frame {
      background: linear-gradient(145deg, #f2e7ef, #fff);
      border: 1px solid #eadcec;
      padding: 28px;
      border-radius: 28px;
      box-shadow: 0 20px 60px rgba(179,123,170,.15);
    }
    .title { font-family: Marcellus, serif; font-size: 38px; letter-spacing: .5px; margin: 0 0 8px; }
    .subtitle { color: var(--muted); margin: 0 0 10px; }
    .names { font-family: Marcellus, serif; font-size: 56px; margin: 10px 0; color: var(--brand); }
    .guest {
      display: inline-block;
      margin-top: 10px;
      padding: 6px 12px;
      border-radius: 999px;
      background: #fff;
      border: 1px dashed var(--brand);
      color: #7a4a70;
    }
    .section { padding: 56px 16px; }
    .card {
      background: var(--card);
      border: 1px solid #eee;
      border-radius: 20px;
      padding: 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,.05);
    }
    .grid { display: grid; gap: 20px; }
    @media (min-width: 800px) { .grid-2 { grid-template-columns: 1fr 1fr; } }
    .countdown { display: flex; gap: 12px; justify-content: center; margin: 18px 0 6px; }
    .cd { min-width: 86px; padding: 12px 10px; border-radius: 16px; border: 1px solid #eee; background: #fff; }
    .cd b { display: block; font-size: 28px; font-weight: 700; }
    .cd span { font-size: 12px; color: var(--muted); }
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      border-radius: 999px;
      border: 1px solid var(--brand);
      color: #fff;
      background: var(--brand);
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
    }
    .btn.ghost { background: #fff; color: var(--brand); }
    .btn:focus { outline: 4px solid var(--ring); }
    .list { list-style: none; padding: 0; margin: 0; display: grid; gap: 10px; }
    .list li { padding: 10px 12px; border: 1px dashed #e7d8e3; border-radius: 14px; background: #fff; }
    footer { padding: 40px 16px; text-align: center; color: var(--muted); }
    .gallery { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
    @media (min-width: 700px) { .gallery { grid-template-columns: repeat(4, 1fr); } }
    .gallery a { position: relative; border-radius: 14px; overflow: hidden; }
    dialog[open] {
      border: none;
      border-radius: 16px;
      padding: 0;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.35);
      position: fixed; /* Tetap di layar */
      top: 50%; /* Posisi vertikal tengah */
      left: 50%; /* Posisi horizontal tengah */
      transform: translate(-50%, -50%); /* Offset untuk benar-benar tengah */
      width: 90vw; /* Lebar adaptif untuk mobile */
      max-width: 900px; /* Batasi lebar maksimum */
      height: auto; /* Tinggi otomatis berdasarkan konten */
      display: flex; /* Gunakan flex untuk centering internal */
      justify-content: center; /* Center horizontal */
      align-items: center; /* Center vertikal */
      background: rgba(0, 0, 0, 0.8); /* Latar gelap opsional */
      z-index: 10000; /* Pastikan di atas elemen lain */
    }
    .lightbox img {
      width: 80vw;
      max-width: 900px;
      height: auto;
      display: block;
      margin: 0 auto; /* Center gambar */
      object-fit: contain; /* Pastikan gambar tidak terpotong */
    }
    .badge { display: inline-block; background: #fff3; border: 1px solid #eee; color: #6a6a6a; padding: 6px 10px; border-radius: 999px; }
    .mempelai { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }
    .foto-mempelai {
      width: 120px;
      height: 150px;
      object-fit: cover;
      border-radius: 16px;
      border: 2px solid #b37baa;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    #btnMusic {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 10001; /* Di atas elemen lain, termasuk lightbox */
      margin: 0;
      padding: 10px 16px;
      border-radius: 50%; /* Membuat tombol bulat */
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px; /* Ukuran ikon lebih besar */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Bayangan untuk estetika */
    }
    #btnMusic:hover {
      background: var(--brand); /* Warna saat hover */
      color: #fff;
    }
    .cover {
      position: fixed;
      inset: 0;
      background: #555;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }
    .cover-inner { max-width: 600px; padding: 20px; }
    .cover-names { font-family: Marcellus, serif; font-size: 32px; margin: 10px 0; }
    .cover-subtitle { font-style: italic; font-size: 18px; }
    .cover-to { margin-top: 20px; font-size: 14px; color: #ddd; }
    #coverGuest { margin: 4px 0 20px; font-size: 20px; }
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: #fff;
      padding: 10px 20px;
      border-radius: 8px;
      z-index: 10000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .toast.show { opacity: 1; }
  </style>
</head>
<body>
  <div id="cover" class="cover">
    <div class="cover-inner">
      <p class="cover-subtitle">The Wedding Of</p>
      <h1 class="cover-names">Ain Fadhila & Candra</h1>
      <p class="cover-to">Kepada Yth:</p>
      <h2 id="coverGuest">Tamu</h2>
      <button id="openBtn" class="btn" aria-label="Buka undangan">üì© Buka Undangan</button>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="container frame">
      <p class="subtitle">Undangan Pernikahan</p>
      <h1 class="names" id="names">Ain Fadhila & Candra</h1>
      <p class="subtitle">InsyaAllah diselenggarakan pada</p>
      <h2 class="title" id="dateText">Sabtu, 20 September 2025</h2>
      <div class="countdown" aria-live="polite">
        <div class="cd"><b id="cd-day">--</b><span>Hari</span></div>
        <div class="cd"><b id="cd-hr">--</b><span>Jam</span></div>
        <div class="cd"><b id="cd-min">--</b><span>Menit</span></div>
        <div class="cd"><b id="cd-sec">--</b><span>Detik</span></div>
      </div>
      <div id="guestChip" class="guest" hidden>Kepada Yth: <span id="guestName">Tamu</span></div>
      <div style="margin-top:16px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
        <button class="btn" id="btnSaveDate" type="button" aria-label="Simpan ke kalender">Simpan ke Kalender</button>
        <button class="btn ghost" id="btnOpenMap" type="button" aria-label="Lihat lokasi">Lihat Lokasi</button>
        <button class="btn ghost" id="btnShare" type="button" aria-label="Bagikan undangan">Bagikan</button>
      </div>
    </div>
  </header>

  <!-- DOA / AYAT & DETAIL MEMPELAI -->
  <section class="section">
    <div class="container grid grid-2">
      <div class="card">
        <h3 style="margin-top:0">Bismillahirrahmanirrahim</h3>
        <p>"Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang." <span class="badge">QS. Ar‚ÄëRum: 21</span></p>
        <p>Dengan memohon rahmat dan ridha Allah SWT, kami bermaksud menyelenggarakan acara pernikahan kami.</p>
      </div>
      <div class="card">
        <h3 style="margin-top:0">Detail Mempelai</h3>
        <div class="mempelai">
          <img src="foto-ain.jpg" alt="Foto Ain Fadhila Choirunnisa" class="foto-mempelai">
          <p><strong>Ain Fadhila Choirunnisa, S.Ak</strong><br>Putri pertama dari Bpk Parno & Ibu Istrina</p>
        </div>
        <div class="mempelai">
          <img src="foto-candra.jpg" alt="Foto Candra Adi Pradana" class="foto-mempelai">
          <p><strong>Candra Adi Pradana</strong><br>Putra pertama dari Bpk Bahrudin & Ibu Nur'aini</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ACARA & LOKASI -->
  <section class="section" id="acara">
    <div class="container grid grid-2">
      <div class="card">
        <h3 style="margin-top:0">Waktu & Tempat</h3>
        <ul class="list">
          <li><strong>Akad</strong><br><span id="akadText">Kamis, 28 Agustus 2025 ‚Ä¢ Sudah Terlaksana</span></li>
          <li><strong>Resepsi</strong><br><span id="resepsiText">Sabtu, 20 September 2025 ‚Ä¢ 10:00 WIB - Selesai</span></li>
          <li><strong>Lokasi</strong><br><span id="venueText">Rumah Mempelai Wanita, Gunung Wijil rt 06/09, Ngringo, Jaten, Karanganyar</span></li>
        </ul>
        <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
          <a id="mapLink" class="btn" target="_blank" rel="noopener" aria-label="Buka peta di Google Maps">Buka Google Maps</a>
          <button class="btn ghost" id="btnCopyAddress" type="button" aria-label="Salin alamat">Salin Alamat</button>
        </div>
      </div>
      <div class="card">
        <div style="border-radius:16px;overflow:hidden">
          <iframe id="mapEmbed" width="100%" height="360" style="border:0;" allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- GALERI -->
  <section class="section">
    <div class="container">
      <div class="card">
        <h3 style="margin-top:0">Galeri</h3>
        <div class="gallery" id="gallery"></div>
      </div>
    </div>
    <dialog id="lightbox" class="lightbox" aria-label="Tampilan gambar penuh"><img id="lightboxImg" alt="Foto galeri"/></dialog>
    <audio id="bgMusic" loop>
      <source src="1.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
    <button id="btnMusic" class="btn ghost" aria-label="Putar musik">üéµ Putar Musik</button>
  </section>

  <!-- WEDDING GIFT -->
  <section class="section" id="gift">
    <div class="container grid grid-2">
      <div class="card">
        <h3 style="margin-top:0">Wedding Gift</h3>
        <p>Doa restu Anda adalah karunia yang sangat berarti. Bagi yang ingin mengirimkan tanda kasih secara cashless, berikut informasi rekening:</p>
        <ul class="list" id="giftList"></ul>
      </div>
      <div class="card">
        <h3 style="margin-top:0">QR Undangan</h3>
        <p>Pindai QR berikut untuk membuka undangan ini.</p>
        <div id="qrcode" style="display:grid;place-items:center;padding:12px"></div>
        <button class="btn ghost" id="btnCopyLink" type="button" aria-label="Salin link undangan">Salin Link</button>
      </div>
    </div>
  </section>

  <!-- RSVP -->
  <section class="section" id="rsvp">
    <div class="container">
      <div class="card">
        <h3 style="margin-top:0">Konfirmasi Kehadiran</h3>
        <form id="rsvpForm" style="display:grid;gap:12px;max-width:640px;margin:0 auto">
          <label>Nama Lengkap<br><input name="nama" required placeholder="Nama Anda" style="width:100%;padding:12px;border-radius:12px;border:1px solid #ddd" aria-required="true"></label>
          <label>Status Kehadiran<br>
            <select name="status" required style="width:100%;padding:12px;border-radius:12px;border:1px solid #ddd" aria-required="true">
              <option value="Hadir">Hadir</option>
              <option value="Tidak Hadir">Tidak Hadir</option>
              <option value="Ragu">Ragu</option>
            </select>
          </label>
          <label>Jumlah Tamu<br><input type="number" name="jumlah" min="1" value="1" style="width:100%;padding:12px;border-radius:12px;border:1px solid #ddd" aria-required="true"></label>
          <label>Ucapan/Doa (opsional)<br><textarea name="ucapan" rows="3" placeholder="Tulis ucapan atau doa" style="width:100%;padding:12px;border-radius:12px;border:1px solid #ddd"></textarea></label>
          <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
            <button class="btn" type="submit" aria-label="Kirim konfirmasi via WhatsApp">Kirim via WhatsApp</button>
            <button class="btn ghost" type="reset" aria-label="Reset formulir">Reset</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <footer>
    <p>Terima kasih atas doa dan restu Anda ‚ô•Ô∏è</p>
    <p style="font-size:12px">Template by Candra</p>
  </footer>

  <!-- QRCode library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    // Konfigurasi
    const CONFIG = {
      couple: { left: 'Ain Fadhila', right: 'Candra' },
      event: {
        dateISO: '2025-09-22T10:00:00+07:00',
        akadText: 'Kamis, 28 Agustus 2025 ‚Ä¢ Sudah Terlaksana',
        resepsiText: 'Senin, 22 September 2025 ‚Ä¢ 10:00 WIB - Selesai',
      },
      venue: {
        name: 'Rumah Mempelai Laki-laki',
        address: 'Duwet rt 13 rw 05 Ngetal, Pogalan, Trenggalek ',
        mapsLink: 'https://maps.app.goo.gl/hLr4AmzEZgw6ZEa19',
        mapsEmbedSrc: 'https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d15820.70834890364!2d110.8672131!3d-7.5556611!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e791b0a40000001%3A0x31147083705d2178!2sCandra%20cell!5e0!3m2!1sid!2sid!4v1758054843465!5m2!1sid!2sid" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"'
      },
      gift: {
        bank: { name: 'BRI', number: '687501028618539', holder: 'Candra Adi Pradana' },
        whatsapp: '6282331555495'
      },
      gallery: [
        '1.jpg',
        '2.jpg',
        '3.jpg',
        '5.jpg',
        '4.jpg',
        '6.jpg'
      ]
    };

    // Utilitas
    const $ = (s, d = document) => d.querySelector(s);
    const $$ = (s, d = document) => Array.from(d.querySelectorAll(s));
    const fmtDateLong = (iso) => new Date(iso).toLocaleString('id-ID', {
      weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit'
    });

    // Fungsi untuk menampilkan toast notification
    const showToast = (message, duration = 3000) => {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.classList.add('show'), 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, duration);
    };

    // Semua logika dijalankan setelah DOM siap
    document.addEventListener('DOMContentLoaded', () => {
      // Cover & Personalisasi
      const url = new URL(location.href);
      const toName = url.searchParams.get('to') || url.searchParams.get('Calon');
      if (toName) {
        const decodedName = decodeURIComponent(toName);
        $('#coverGuest').textContent = decodedName;
        $('#guestName').textContent = decodedName;
        $('#guestChip').hidden = false;
        document.title = `Undangan untuk ${decodedName}`;
      }
      $('#openBtn').addEventListener('click', () => {
        $('#cover').style.transition = 'opacity 0.5s ease';
        $('#cover').style.opacity = '0';
        setTimeout(() => $('#cover').style.display = 'none', 500);
      });

      // Set Konten Dinamis
      const names = `${CONFIG.couple.left} & ${CONFIG.couple.right}`;
      $('#names').textContent = names;
      $('#dateText').textContent = fmtDateLong(CONFIG.event.dateISO);
      $('#akadText').textContent = CONFIG.event.akadText;
      $('#resepsiText').textContent = CONFIG.event.resepsiText;
      $('#venueText').textContent = `${CONFIG.venue.name}, ${CONFIG.venue.address}`;
      $('#mapLink').href = CONFIG.venue.mapsLink;
      $('#mapEmbed').src = CONFIG.venue.mapsEmbedSrc;

      // Countdown
      const target = new Date(CONFIG.event.dateISO).getTime();
      const tick = () => {
        const now = Date.now();
        const diff = target - now;
        if (diff <= 0) {
          $('#cd-day').textContent = 0;
          $('#cd-hr').textContent = 0;
          $('#cd-min').textContent = 0;
          $('#cd-sec').textContent = 0;
          $('.countdown').insertAdjacentHTML('afterend', '<p style="color:var(--muted)" role="alert">Acara telah selesai.</p>');
          clearInterval(interval);
          return;
        }
        const d = Math.floor(diff / 86400000);
        const h = Math.floor((diff % 86400000) / 3600000);
        const m = Math.floor((diff % 3600000) / 60000);
        const s = Math.floor((diff % 60000) / 1000);
        $('#cd-day').textContent = d;
        $('#cd-hr').textContent = h;
        $('#cd-min').textContent = m;
        $('#cd-sec').textContent = s;
      };
      const interval = setInterval(tick, 1000);
      tick();

      // Galeri
      const gal = $('#gallery');
      if (CONFIG.gallery?.length) {
        gal.innerHTML = CONFIG.gallery
          .map(src => `<a href="${src}" data-full><img src="${src}" alt="Foto galeri" loading="lazy"/></a>`)
          .join('');
      }
      const lightbox = $('#lightbox');
      const lightImg = $('#lightboxImg');
      gal.addEventListener('click', e => {
        const a = e.target.closest('a[data-full]');
        if (!a) return;
        e.preventDefault();
        lightImg.src = a.href;
        lightbox.showModal();
      });
      lightbox.addEventListener('click', e => {
        if (e.target === lightbox) lightbox.close();
      });

      // Gift
      $('#giftList').innerHTML = `
        <li>
          <strong>${CONFIG.gift.bank.name} ‚Ä¢ ${CONFIG.gift.bank.number}</strong><br>
          a/n <em>${CONFIG.gift.bank.holder}</em>
          <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn" data-copy="${CONFIG.gift.bank.number}" type="button" aria-label="Salin nomor rekening">Salin No. Rekening</button>
            <a class="btn ghost" href="https://wa.me/${CONFIG.gift.whatsapp}?text=${encodeURIComponent(`Assalamu'alaikum, kami telah mengirimkan tanda kasih untuk ${names}. Terima kasih.`)}" target="_blank" rel="noopener" aria-label="Konfirmasi gift via WhatsApp">Konfirmasi via WhatsApp</a>
          </div>
        </li>`;

      // Copy to Clipboard
      document.body.addEventListener('click', e => {
        const btn = e.target.closest('[data-copy]');
        if (!btn) return;
        const text = btn.getAttribute('data-copy');
        (navigator.clipboard ? navigator.clipboard.writeText(text) : Promise.reject())
          .then(() => showToast('Tersalin ke clipboard'))
          .catch(() => {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            try {
              document.execCommand('copy');
              showToast('Tersalin ke clipboard');
            } catch {
              showToast('Gagal menyalin');
            }
            document.body.removeChild(textarea);
          });
      });

      // RSVP
      $('#rsvpForm').addEventListener('submit', e => {
        e.preventDefault();
        const data = Object.fromEntries(new FormData(e.target));
        if (!data.nama.trim()) return showToast('Nama tidak boleh kosong!');
        if (data.jumlah < 1) return showToast('Jumlah tamu harus minimal 1!');
        const msg = `RSVP Undangan ${names}\nNama: ${data.nama.trim()}\nStatus: ${data.status}\nJumlah Tamu: ${data.jumlah || '1'}\nUcapan: ${data.ucapan.trim() || '-'}\n${toName ? `Untuk tamu: ${toName}\n` : ''}Terima kasih.`;
        window.open(`https://wa.me/${CONFIG.gift.whatsapp}?text=${encodeURIComponent(msg)}`, '_blank');
      });

      // QR Code
      new QRCode($('#qrcode'), {
        text: location.href,
        width: 180,
        height: 180,
        colorDark: '#2b2b2b',
        colorLight: '#fffaf7',
        correctLevel: QRCode.CorrectLevel.H
      });
      $('#btnCopyLink').addEventListener('click', () => {
        navigator.clipboard.writeText(location.href).then(() => showToast('Link undangan tersalin.'));
      });

      // Maps
      $('#btnOpenMap').addEventListener('click', () => window.open(CONFIG.venue.mapsLink, '_blank'));
      $('#btnCopyAddress').addEventListener('click', () => {
        navigator.clipboard.writeText(`${CONFIG.venue.name}, ${CONFIG.venue.address}`)
          .then(() => showToast('Alamat tersalin.'));
      });

      // Share
      $('#btnShare').addEventListener('click', async () => {
        const shareData = { title: `Undangan ${names}`, text: 'Mohon doa & kehadiran Anda', url: location.href };
        if (navigator.share) {
          try {
            await navigator.share(shareData);
          } catch (e) {
            console.error('Gagal berbagi:', e);
            navigator.clipboard.writeText(location.href).then(() => showToast('Link disalin ke clipboard.'));
          }
        } else {
          navigator.clipboard.writeText(location.href).then(() => showToast('Link disalin karena perangkat tidak mendukung Share.'));
        }
      });

      // Kontrol Musik
      const bgMusic = $('#bgMusic');
      const btnMusic = $('#btnMusic');

      // Set volume awal, tapi tidak autoplay
      bgMusic.volume = 0.3; // Volume 30%

      // Mulai musik setelah cover dibuka (bukan autoplay)
      $('#openBtn').addEventListener('click', () => {
        // Logika cover existing
        $('#cover').style.transition = 'opacity 0.5s ease';
        $('#cover').style.opacity = '0';
        setTimeout(() => $('#cover').style.display = 'none', 500);
        
        // Mulai musik setelah cover hilang
        setTimeout(() => {
          bgMusic.play().catch(error => {
            showToast('Gagal memutar musik, periksa file.');
          });
          btnMusic.textContent = '‚è∏Ô∏è Jeda Musik';
          btnMusic.setAttribute('aria-label', 'Jeda musik');
        }, 500); // Delay 500ms agar sinkron dengan transisi cover
      });

      // Tombol musik untuk pause/play selanjutnya
      btnMusic.addEventListener('click', () => {
        if (bgMusic.paused) {
          bgMusic.play().catch(error => showToast('Gagal memutar musik, periksa file.'));
          btnMusic.textContent = '‚è∏Ô∏è Jeda Musik';
          btnMusic.setAttribute('aria-label', 'Jeda musik');
        } else {
          bgMusic.pause();
          btnMusic.textContent = 'üéµ Putar Musik';
          btnMusic.setAttribute('aria-label', 'Putar musik');
        }
      });

      // Save to Calendar
      $('#btnSaveDate').addEventListener('click', () => {
        const dt = new Date(CONFIG.event.dateISO);
        const dtEnd = new Date(dt.getTime() + 2 * 60 * 60 * 1000);
        const toICS = d => d.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
        const ics = [
          'BEGIN:VCALENDAR', 'VERSION:2.0', 'PRODID:-//Undangan//ID',
          'BEGIN:VEVENT',
          `DTSTART:${toICS(dt)}`,
          `DTEND:${toICS(dtEnd)}`,
          `SUMMARY:Pernikahan ${names}`,
          `LOCATION:${CONFIG.venue.name} - ${CONFIG.venue.address}`,
          'END:VEVENT', 'END:VCALENDAR'
        ].join('\r\n');
        const blob = new Blob([ics], { type: 'text/calendar' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `save-the-date-${names.replace(/\s+/g, '-')}.ics`;
        a.click();
        setTimeout(() => URL.revokeObjectURL(url), 1000);
      });
    });
  </script>
</body>
</html>